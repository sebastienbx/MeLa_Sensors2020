
Mission:
   ParkTime: 10080 minutes;
   ParkDepth: 500 meters;



Coordinator:
   ParkAcqModes: MermaidAlgo;




ContinuousAcqMode MermaidAlgo:

/*  The input is the hydrophone, packets of 40 samples are put in the x variable */
Input:
    sensor: Hydrophone;
    data: name = x, size = 512;

Variables:
    /*  File to record datas */
    File fb1;
    File fb2;
    File fb3;
    File fb4;

    /*  Buffer that contains the last 5 minutes of signal */
    BufferInt last5Minutes(12000);

    /* Float samples */
    ArrayFloat xf(1024);

    /* FFT */
    ArrayFloat hanning(1024, 9.39400213778585e-06, 3.75756555620055e-05, 8.45439013186233e-05, 0.000150296974528452, 0.000234832404453433, 0.000338147014589563, 0.000460236922786073, 0.000601097541391649, 0.000760723577426403, 0.000939109032781049, 0.00113624720444222, 0.00135213068474432, 0.00158675136164776, 0.00184010041904403, 0.00211216833708677, 0.00240294489254955, 0.00271241915921006, 0.00304057950826064, 0.00338741360874512, 0.00375290842802251, 0.00413705023225619, 0.00453982458693059, 0.00496121635739300, 0.00540120970942271, 0.00585978810982574, 0.00633693432705623, 0.00683263043186377, 0.00734685779796734, 0.00787959710275504, 0.00843082832801023, 0.00900053076066359, 0.00958868299357168, 0.0101952629263212, 0.0108202477660593, 0.0114636140283504, 0.0121253375380583, 0.0128053934302548, 0.0135037561511537, 0.0142203994590717, 0.0149552964254134, 0.0157084194356845, 0.0164797401905279, 0.0172692297067887, 0.0180768583186018, 0.0189025956785078, 0.0197464107585925, 0.0206082718516532, 0.0214881465723902, 0.0223860018586233, 0.0233018039725347, 0.0242355185019364, 0.0251871103615631, 0.0261565437943911, 0.0271437823729814, 0.0281487890008486, 0.0291715259138552, 0.0302119546816302, 0.0312700362090133, 0.0323457307375240, 0.0334389978468553, 0.0345497964563933, 0.0356780848267597, 0.0368238205613811, 0.0379869606080818, 0.0391674612607014, 0.0403652781607373, 0.0415803662990114, 0.0428126800173615, 0.0440621730103566, 0.0453287983270376, 0.0466125083726806, 0.0479132549105858, 0.0492309890638905, 0.0505656613174046, 0.0519172215194722, 0.0532856188838556, 0.0546708019916438, 0.0560727187931843, 0.0574913166100396, 0.0589265421369659, 0.0603783414439165, 0.0618466599780682, 0.0633314425658713, 0.0648326334151226, 0.0663501761170618, 0.0678840136484914, 0.0694340883739193, 0.0710003420477242, 0.0725827158163448, 0.0741811502204908, 0.0757955851973772, 0.0774259600829818, 0.0790722136143237, 0.0807342839317662, 0.0824121085813410, 0.0841056245170945, 0.0858147681034575, 0.0875394751176360, 0.0892796807520245, 0.0910353196166412, 0.0928063257415850, 0.0945926325795147, 0.0963941730081493, 0.0982108793327903, 0.100042683288865, 0.101889516044493, 0.103751308203070, 0.105627989805878, 0.107519490334714, 0.109425738714537, 0.111346663316142, 0.113282191958850, 0.115232251913220, 0.117196769903781, 0.119175672111791, 0.121168884178001, 0.123176331205459, 0.125197937762318, 0.127233627884673, 0.129283325079413, 0.131346952327101, 0.133424432084860, 0.135515686289294, 0.137620636359417, 0.139739203199606, 0.141871307202577, 0.144016868252371, 0.146175805727367, 0.148348038503313, 0.150533484956371, 0.152732062966187, 0.154943689918974, 0.157168282710620, 0.159405757749806, 0.161656030961151, 0.163919017788370, 0.166194633197450, 0.168482791679848, 0.170783407255701, 0.173096393477057, 0.175421663431128, 0.177759129743549, 0.180108704581667, 0.182470299657836, 0.184843826232741, 0.187229195118726, 0.189626316683150, 0.192035100851752, 0.194455457112039, 0.196887294516681, 0.199330521686937, 0.201785046816080, 0.204250777672855, 0.206727621604937, 0.209215485542417, 0.211714276001299, 0.214223899087011, 0.216744260497935, 0.219275265528949, 0.221816819074985, 0.224368825634607, 0.226931189313593, 0.229503813828545, 0.232086602510502, 0.234679458308573, 0.237282283793588, 0.239894981161754, 0.242517452238332, 0.245149598481326, 0.247791320985187, 0.250442520484527, 0.253103097357851, 0.255772951631301, 0.258451982982408, 0.261140090743869, 0.263837173907322, 0.266543131127147, 0.269257860724274, 0.271981260689999, 0.274713228689823, 0.277453662067292, 0.280202457847857, 0.282959512742747, 0.285724723152841, 0.288497985172571, 0.291279194593818, 0.294068246909834, 0.296865037319165, 0.299669460729591, 0.302481411762073, 0.305300784754716, 0.308127473766736, 0.310961372582443, 0.313802374715229, 0.316650373411576, 0.319505261655059, 0.322366932170374, 0.325235277427364, 0.328110189645065, 0.330991560795749, 0.333879282608989, 0.336773246575727, 0.339673343952348, 0.342579465764767, 0.345491502812526, 0.348409345672897, 0.351332884704992, 0.354262010053882, 0.357196611654728, 0.360136579236916, 0.363081802328199, 0.366032170258848, 0.368987572165813, 0.371947896996886, 0.374913033514877, 0.377882870301791, 0.380857295763014, 0.383836198131510, 0.386819465472019, 0.389806985685261, 0.392798646512151, 0.395794335538016, 0.398793940196820, 0.401797347775393, 0.404804445417666, 0.407815120128911, 0.410829258779991, 0.413846748111606, 0.416867474738550, 0.419891325153975, 0.422918185733650, 0.425947942740237, 0.428980482327561, 0.432015690544889, 0.435053453341210, 0.438093656569523, 0.441136185991127, 0.444180927279909, 0.447227766026645, 0.450276587743296, 0.453327277867312, 0.456379721765933, 0.459433804740502, 0.462489412030771, 0.465546428819215, 0.468604740235343, 0.471664231360021, 0.474724787229784, 0.477786292841158, 0.480848633154982, 0.483911693100731, 0.486975357580837, 0.490039511475018, 0.493104039644601, 0.496168826936849, 0.499233758189289, 0.502298718234038, 0.505363591902131, 0.508428264027849, 0.511492619453045, 0.514556543031475, 0.517619919633119, 0.520682634148513, 0.523744571493068, 0.526805616611403, 0.529865654481658, 0.532924570119825, 0.535982248584064, 0.539038574979022, 0.542093434460153, 0.545146712238031, 0.548198293582664, 0.551248063827805, 0.554295908375261, 0.557341712699200, 0.560385362350452, 0.563426742960813, 0.566465740247337, 0.569502240016637, 0.572536128169172, 0.575567290703535, 0.578595613720736, 0.581620983428485, 0.584643286145461, 0.587662408305594, 0.590678236462322, 0.593690657292862, 0.596699557602463, 0.599704824328660, 0.602706344545525, 0.605704005467909, 0.608697694455680, 0.611687299017955, 0.614672706817327, 0.617653805674087, 0.620630483570439, 0.623602628654708, 0.626570129245547, 0.629532873836126, 0.632490751098331, 0.635443649886939, 0.638391459243801, 0.641334068402007, 0.644271366790051, 0.647203244035982, 0.650129589971556, 0.653050294636374, 0.655965248282012, 0.658874341376147, 0.661777464606671, 0.664674508885802, 0.667565365354180, 0.670449925384955, 0.673328080587877, 0.676199722813361, 0.679064744156553, 0.681923036961388, 0.684774493824631, 0.687619007599913, 0.690456471401761, 0.693286778609612, 0.696109822871816, 0.698925498109640, 0.701733698521245, 0.704534318585670, 0.707327253066791, 0.710112397017277, 0.712889645782536, 0.715658895004645, 0.718420040626272, 0.721172978894583, 0.723917606365149, 0.726653819905824, 0.729381516700623, 0.732100594253589, 0.734810950392641, 0.737512483273413, 0.740205091383082, 0.742888673544184, 0.745563128918412, 0.748228357010407, 0.750884257671537, 0.753530731103655, 0.756167677862854, 0.758794998863198, 0.761412595380453, 0.764020369055787, 0.766618221899477, 0.769206056294580, 0.771783775000611, 0.774351281157187, 0.776908478287677, 0.779455270302819, 0.781991561504335, 0.784517256588523, 0.787032260649846, 0.789536479184488, 0.792029818093912, 0.794512183688394, 0.796983482690544, 0.799443622238808, 0.801892509890963, 0.804330053627585, 0.806756161855508, 0.809170743411272, 0.811573707564536, 0.813964964021501, 0.816344422928294, 0.818711994874345, 0.821067590895751, 0.823411122478617, 0.825742501562378, 0.828061640543116, 0.830368452276843, 0.832662850082783, 0.834944747746623, 0.837214059523757, 0.839470700142508, 0.841714584807327, 0.843945629201985, 0.846163749492739, 0.848368862331482, 0.850560884858876, 0.852739734707462, 0.854905330004760, 0.857057589376344, 0.859196431948895, 0.861321777353248, 0.863433545727406, 0.865531657719542, 0.867616034490981, 0.869686597719165, 0.871743269600592, 0.873785972853742, 0.875814630721979, 0.877829166976439, 0.879829505918889, 0.881815572384577, 0.883787291745053, 0.885744589910972, 0.887687393334881, 0.889615629013984, 0.891529224492879, 0.893428107866287, 0.895312207781749, 0.897181453442311, 0.899035774609183, 0.900875101604375, 0.902699365313322, 0.904508497187474, 0.906302429246876, 0.908081094082723, 0.909844424859890, 0.911592355319443, 0.913324819781133, 0.915041753145861, 0.916743090898123, 0.918428769108438, 0.920098724435747, 0.921752894129794, 0.923391216033485, 0.925013628585222, 0.926620070821217, 0.928210482377783, 0.929784803493601, 0.931342975011968, 0.932884938383017, 0.934410635665920, 0.935920009531062, 0.937413003262199, 0.938889560758585, 0.940349626537083, 0.941793145734248, 0.943220064108392, 0.944630328041617, 0.946023884541833, 0.947400681244749, 0.948760666415842, 0.950103788952295, 0.951429998384927, 0.952739244880078, 0.954031479241493, 0.955306652912161, 0.956564717976146, 0.957805627160384, 0.959029333836461, 0.960235792022365, 0.961424956384212, 0.962596782237952, 0.963751225551047, 0.964888242944126, 0.966007791692612, 0.967109829728333, 0.968194315641097, 0.969261208680253, 0.970310468756220, 0.971342056441990, 0.972355932974618, 0.973352060256668, 0.974330400857655, 0.975290918015443, 0.976233575637632, 0.977158338302909, 0.978065171262387, 0.978954040440902, 0.979824912438297, 0.980677754530679, 0.981512534671647, 0.982329221493494, 0.983127784308390, 0.983908193109532, 0.984670418572271, 0.985414432055218, 0.986140205601315, 0.986847711938889, 0.987536924482677, 0.988207817334821, 0.988860365285846, 0.989494543815605, 0.990110329094200, 0.990707697982877, 0.991286628034900, 0.991847097496386, 0.992389085307130, 0.992912571101395, 0.993417535208673, 0.993903958654429, 0.994371823160811, 0.994821111147338, 0.995251805731562, 0.995663890729699, 0.996057350657239, 0.996432170729529, 0.996788336862327, 0.997125835672330, 0.997444654477681, 0.997744781298442, 0.998026204857045, 0.998288914578715, 0.998532900591870, 0.998758153728490, 0.998964665524460, 0.999152428219891, 0.999321434759412, 0.999471678792430, 0.999603154673375, 0.999715857461908, 0.999809782923107, 0.999884927527630, 0.999941288451841, 0.999978863577922, 0.999997651493950, 0.999997651493950, 0.999978863577922, 0.999941288451841, 0.999884927527630, 0.999809782923107, 0.999715857461908, 0.999603154673375, 0.999471678792430, 0.999321434759412, 0.999152428219891, 0.998964665524460, 0.998758153728490, 0.998532900591870, 0.998288914578715, 0.998026204857045, 0.997744781298442, 0.997444654477681, 0.997125835672330, 0.996788336862327, 0.996432170729529, 0.996057350657239, 0.995663890729699, 0.995251805731562, 0.994821111147338, 0.994371823160811, 0.993903958654429, 0.993417535208673, 0.992912571101395, 0.992389085307130, 0.991847097496386, 0.991286628034900, 0.990707697982877, 0.990110329094200, 0.989494543815605, 0.988860365285846, 0.988207817334821, 0.987536924482677, 0.986847711938889, 0.986140205601315, 0.985414432055218, 0.984670418572271, 0.983908193109532, 0.983127784308390, 0.982329221493494, 0.981512534671647, 0.980677754530679, 0.979824912438297, 0.978954040440902, 0.978065171262387, 0.977158338302909, 0.976233575637632, 0.975290918015443, 0.974330400857655, 0.973352060256668, 0.972355932974618, 0.971342056441990, 0.970310468756220, 0.969261208680253, 0.968194315641097, 0.967109829728333, 0.966007791692612, 0.964888242944126, 0.963751225551047, 0.962596782237952, 0.961424956384212, 0.960235792022365, 0.959029333836461, 0.957805627160384, 0.956564717976146, 0.955306652912161, 0.954031479241493, 0.952739244880078, 0.951429998384927, 0.950103788952295, 0.948760666415842, 0.947400681244749, 0.946023884541833, 0.944630328041617, 0.943220064108392, 0.941793145734248, 0.940349626537083, 0.938889560758585, 0.937413003262199, 0.935920009531062, 0.934410635665920, 0.932884938383017, 0.931342975011968, 0.929784803493601, 0.928210482377783, 0.926620070821217, 0.925013628585222, 0.923391216033485, 0.921752894129794, 0.920098724435747, 0.918428769108438, 0.916743090898123, 0.915041753145861, 0.913324819781133, 0.911592355319443, 0.909844424859890, 0.908081094082723, 0.906302429246876, 0.904508497187474, 0.902699365313322, 0.900875101604375, 0.899035774609183, 0.897181453442311, 0.895312207781749, 0.893428107866287, 0.891529224492879, 0.889615629013984, 0.887687393334881, 0.885744589910972, 0.883787291745053, 0.881815572384577, 0.879829505918889, 0.877829166976439, 0.875814630721979, 0.873785972853742, 0.871743269600592, 0.869686597719165, 0.867616034490981, 0.865531657719542, 0.863433545727406, 0.861321777353248, 0.859196431948895, 0.857057589376344, 0.854905330004760, 0.852739734707462, 0.850560884858876, 0.848368862331482, 0.846163749492739, 0.843945629201985, 0.841714584807327, 0.839470700142508, 0.837214059523757, 0.834944747746623, 0.832662850082783, 0.830368452276843, 0.828061640543116, 0.825742501562378, 0.823411122478617, 0.821067590895751, 0.818711994874345, 0.816344422928294, 0.813964964021501, 0.811573707564536, 0.809170743411272, 0.806756161855508, 0.804330053627585, 0.801892509890963, 0.799443622238808, 0.796983482690544, 0.794512183688394, 0.792029818093912, 0.789536479184488, 0.787032260649846, 0.784517256588523, 0.781991561504335, 0.779455270302819, 0.776908478287677, 0.774351281157187, 0.771783775000611, 0.769206056294580, 0.766618221899477, 0.764020369055787, 0.761412595380453, 0.758794998863198, 0.756167677862854, 0.753530731103655, 0.750884257671537, 0.748228357010407, 0.745563128918412, 0.742888673544184, 0.740205091383082, 0.737512483273413, 0.734810950392641, 0.732100594253589, 0.729381516700623, 0.726653819905824, 0.723917606365149, 0.721172978894583, 0.718420040626272, 0.715658895004645, 0.712889645782536, 0.710112397017277, 0.707327253066791, 0.704534318585670, 0.701733698521245, 0.698925498109640, 0.696109822871816, 0.693286778609612, 0.690456471401761, 0.687619007599913, 0.684774493824631, 0.681923036961388, 0.679064744156553, 0.676199722813361, 0.673328080587877, 0.670449925384955, 0.667565365354180, 0.664674508885802, 0.661777464606671, 0.658874341376147, 0.655965248282012, 0.653050294636374, 0.650129589971556, 0.647203244035982, 0.644271366790051, 0.641334068402007, 0.638391459243801, 0.635443649886939, 0.632490751098331, 0.629532873836126, 0.626570129245547, 0.623602628654708, 0.620630483570439, 0.617653805674087, 0.614672706817327, 0.611687299017955, 0.608697694455680, 0.605704005467909, 0.602706344545525, 0.599704824328660, 0.596699557602463, 0.593690657292862, 0.590678236462322, 0.587662408305594, 0.584643286145461, 0.581620983428485, 0.578595613720736, 0.575567290703535, 0.572536128169172, 0.569502240016637, 0.566465740247337, 0.563426742960813, 0.560385362350452, 0.557341712699200, 0.554295908375261, 0.551248063827805, 0.548198293582664, 0.545146712238031, 0.542093434460153, 0.539038574979022, 0.535982248584064, 0.532924570119825, 0.529865654481658, 0.526805616611403, 0.523744571493068, 0.520682634148513, 0.517619919633119, 0.514556543031475, 0.511492619453045, 0.508428264027849, 0.505363591902131, 0.502298718234038, 0.499233758189289, 0.496168826936849, 0.493104039644601, 0.490039511475018, 0.486975357580837, 0.483911693100731, 0.480848633154982, 0.477786292841158, 0.474724787229784, 0.471664231360021, 0.468604740235343, 0.465546428819215, 0.462489412030771, 0.459433804740502, 0.456379721765933, 0.453327277867312, 0.450276587743296, 0.447227766026645, 0.444180927279909, 0.441136185991127, 0.438093656569523, 0.435053453341210, 0.432015690544889, 0.428980482327561, 0.425947942740237, 0.422918185733650, 0.419891325153975, 0.416867474738550, 0.413846748111606, 0.410829258779991, 0.407815120128911, 0.404804445417666, 0.401797347775393, 0.398793940196820, 0.395794335538016, 0.392798646512151, 0.389806985685261, 0.386819465472019, 0.383836198131510, 0.380857295763014, 0.377882870301791, 0.374913033514877, 0.371947896996886, 0.368987572165813, 0.366032170258848, 0.363081802328199, 0.360136579236916, 0.357196611654728, 0.354262010053882, 0.351332884704992, 0.348409345672897, 0.345491502812526, 0.342579465764767, 0.339673343952348, 0.336773246575727, 0.333879282608989, 0.330991560795749, 0.328110189645065, 0.325235277427364, 0.322366932170374, 0.319505261655059, 0.316650373411576, 0.313802374715229, 0.310961372582443, 0.308127473766736, 0.305300784754716, 0.302481411762073, 0.299669460729591, 0.296865037319165, 0.294068246909834, 0.291279194593818, 0.288497985172571, 0.285724723152841, 0.282959512742747, 0.280202457847857, 0.277453662067292, 0.274713228689823, 0.271981260689999, 0.269257860724274, 0.266543131127147, 0.263837173907322, 0.261140090743869, 0.258451982982408, 0.255772951631301, 0.253103097357851, 0.250442520484527, 0.247791320985187, 0.245149598481326, 0.242517452238332, 0.239894981161754, 0.237282283793588, 0.234679458308573, 0.232086602510502, 0.229503813828545, 0.226931189313593, 0.224368825634607, 0.221816819074985, 0.219275265528949, 0.216744260497935, 0.214223899087011, 0.211714276001299, 0.209215485542417, 0.206727621604937, 0.204250777672855, 0.201785046816080, 0.199330521686937, 0.196887294516681, 0.194455457112039, 0.192035100851752, 0.189626316683150, 0.187229195118726, 0.184843826232741, 0.182470299657836, 0.180108704581667, 0.177759129743549, 0.175421663431128, 0.173096393477057, 0.170783407255701, 0.168482791679848, 0.166194633197450, 0.163919017788370, 0.161656030961151, 0.159405757749806, 0.157168282710620, 0.154943689918974, 0.152732062966187, 0.150533484956371, 0.148348038503313, 0.146175805727367, 0.144016868252371, 0.141871307202577, 0.139739203199606, 0.137620636359417, 0.135515686289294, 0.133424432084860, 0.131346952327101, 0.129283325079413, 0.127233627884673, 0.125197937762318, 0.123176331205459, 0.121168884178001, 0.119175672111791, 0.117196769903781, 0.115232251913220, 0.113282191958850, 0.111346663316142, 0.109425738714537, 0.107519490334714, 0.105627989805878, 0.103751308203070, 0.101889516044493, 0.100042683288865, 0.0982108793327903, 0.0963941730081493, 0.0945926325795147, 0.0928063257415850, 0.0910353196166412, 0.0892796807520245, 0.0875394751176360, 0.0858147681034575, 0.0841056245170945, 0.0824121085813410, 0.0807342839317662, 0.0790722136143237, 0.0774259600829818, 0.0757955851973772, 0.0741811502204908, 0.0725827158163448, 0.0710003420477242, 0.0694340883739193, 0.0678840136484914, 0.0663501761170618, 0.0648326334151226, 0.0633314425658713, 0.0618466599780682, 0.0603783414439165, 0.0589265421369659, 0.0574913166100396, 0.0560727187931843, 0.0546708019916438, 0.0532856188838556, 0.0519172215194722, 0.0505656613174046, 0.0492309890638905, 0.0479132549105858, 0.0466125083726806, 0.0453287983270376, 0.0440621730103566, 0.0428126800173615, 0.0415803662990114, 0.0403652781607373, 0.0391674612607014, 0.0379869606080818, 0.0368238205613811, 0.0356780848267597, 0.0345497964563933, 0.0334389978468553, 0.0323457307375240, 0.0312700362090133, 0.0302119546816302, 0.0291715259138552, 0.0281487890008486, 0.0271437823729814, 0.0261565437943911, 0.0251871103615631, 0.0242355185019364, 0.0233018039725347, 0.0223860018586233, 0.0214881465723902, 0.0206082718516532, 0.0197464107585925, 0.0189025956785078, 0.0180768583186018, 0.0172692297067887, 0.0164797401905279, 0.0157084194356845, 0.0149552964254134, 0.0142203994590717, 0.0135037561511537, 0.0128053934302548, 0.0121253375380583, 0.0114636140283504, 0.0108202477660593, 0.0101952629263212, 0.00958868299357168, 0.00900053076066359, 0.00843082832801023, 0.00787959710275504, 0.00734685779796734, 0.00683263043186377, 0.00633693432705623, 0.00585978810982574, 0.00540120970942271, 0.00496121635739300, 0.00453982458693059, 0.00413705023225619, 0.00375290842802251, 0.00338741360874512, 0.00304057950826064, 0.00271241915921006, 0.00240294489254955, 0.00211216833708677, 0.00184010041904403, 0.00158675136164776, 0.00135213068474432, 0.00113624720444222, 0.000939109032781049, 0.000760723577426403, 0.000601097541391649, 0.000460236922786073, 0.000338147014589563, 0.000234832404453433, 0.000150296974528452, 8.45439013186233e-05, 3.75756555620055e-05, 9.39400213778585e-06);
    ArrayComplexFloat spectrum(1024);
    FFTFloat fftInstance(1024);
    ArrayFloat mag(1024);

    /* Frequency bands  */
    ArrayFloat band1(12);
    ArrayFloat band2(12);
    ArrayFloat band3(26);
    ArrayFloat band4(50);

    Float meanB1;
    Float meanB2;
    Float meanB3;
    Float meanB4;

    /* Last 10 values of each filter correspond to 256 seconds */
    BufferFloat buffB1(20);
    BufferFloat buffB2(20);
    BufferFloat buffB3(20);
    BufferFloat buffB4(20);

    /* STALTA computation: 2 over 8 sample, the delay of the LTA is 2 */
    StaLtaFloat staltaB1(2, 4, 3);
    StaLtaFloat staltaB2(2, 4, 3);
    StaLtaFloat staltaB3(2, 4, 3);
    StaLtaFloat staltaB4(2, 4, 3);

    Float staltaResB1;
    Float staltaResB2;
    Float staltaResB3;
    Float staltaResB4;


    /* Trigger parameters: rising edge over 100, and after a delay of 10 values, the minimum time between each trigger is 0*/
    TriggerFloat triggerB1(RISING_EDGE, 1.01, 10, 0);
    TriggerFloat triggerB2(RISING_EDGE, 1.01, 10, 0);
    TriggerFloat triggerB3(RISING_EDGE, 1.01, 10, 0);
    TriggerFloat triggerB4(RISING_EDGE, 1.01, 10, 0);

    Bool trigB1;
    Bool trigB2;
    Bool trigB3;
    Bool trigB4;



RealTimeSequence detection:

    /* Save samples in the circular buffer */
    push(last5Minutes, x);

    /* Filter data for STA over LTA algorithm */
    toFloat(x, xf);
    mult(xf, hanning, xf);
    toComplex(xf, spectrum);
    fft(fftInstance, spectrum);
    magnitude(spectrum, mag);
    log10(mag, mag);
    mult(mag, 20.0, mag);

    /* 0 to 0.43Hz */
    copy(mag, 0, band1, 0, 12);
    /* 0.46Hz to 0.90Hz */
    copy(mag, 12, band2, 0, 12);
    /* 0.94Hz to 1.91Hz */
    copy(mag, 24, band3, 0, 26);
    /* 1.91Hz to 3.87Hz */
    copy(mag, 50, band4, 0, 50);

    mean(band1, meanB1);
    mean(band2, meanB2);
    mean(band3, meanB3);
    mean(band4, meanB4);

    /* Compute STA over LTA for each value */
    stalta(staltaB1, meanB1, staltaResB1);
    stalta(staltaB2, meanB2, staltaResB2);
    stalta(staltaB3, meanB3, staltaResB3);
    stalta(staltaB4, meanB4, staltaResB4);

    /* Keep last STA over LTA values */
    push(buffB1, staltaResB1);
    push(buffB2, staltaResB2);
    push(buffB3, staltaResB3);
    push(buffB4, staltaResB4);

    /* Check trigger level */
    trigger(triggerB1, staltaResB1, trigB1);
    trigger(triggerB2, staltaResB2, trigB2);
    trigger(triggerB3, staltaResB3, trigB3);
    trigger(triggerB4, staltaResB4, trigB4);

/*
    if trigB1:
        @probability = 10 per hour
        serialPrint("trigB1\n");
    endif;
    if trigB2:
        @probability = 10 per hour
        serialPrint("trigB2\n");

        record(fb1, buffB1);
        record(fb2, buffB2);
        record(fb3, buffB3);
        record(fb4, buffB4);

    endif;
    if trigB3:
        @probability = 10 per hour
        serialPrint("trigB3\n");
    endif;
    if trigB4:
        @probability = 10 per hour
        serialPrint("trigB4\n");
    endif;
    */

endseq;

endmode;
